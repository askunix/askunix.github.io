<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Askunix&#39;s Blog</title>
  
  <subtitle>不积跬步无以至千里</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2018-06-23T07:31:37.703Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>何进鸿</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>【编程之美】链表面试题汇总版</title>
    <link href="http://yoursite.com/2018/06/21/%E3%80%90%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E%E3%80%91%E9%93%BE%E8%A1%A8%E9%9D%A2%E8%AF%95%E9%A2%98%E6%B1%87%E6%80%BB%E7%89%88/"/>
    <id>http://yoursite.com/2018/06/21/【编程之美】链表面试题汇总版/</id>
    <published>2018-06-21T09:49:33.000Z</published>
    <updated>2018-06-23T07:31:37.703Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><blockquote><p>对于不带头结点的单链表操作，是在面试中经常出现的，在此对于常见链表操作进行总结，<br>操作：有序链表合并、链表反转、链表排序、找倒数第K个节点、非头节点前插入data、删除非尾节点、约瑟夫环、带环链表环的大小等等</p></blockquote><hr><a id="more"></a><h4 id="function-h"><a href="#function-h" class="headerlink" title="function.h"></a><code>function.h</code></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> __FUNCTION_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __FUNCTION_H__</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;assert.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;malloc.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> DataType int</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">DataType data;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span>* _<span class="title">pNext</span>;</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Node</span> <span class="title">Node</span>;</span></span><br><span class="line"><span class="keyword">typedef</span> Node *pNode;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">InitNodeList</span><span class="params">(pNode *pHead)</span></span>;<span class="comment">//初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">BuyNewNode</span><span class="params">(DataType data)</span></span>;<span class="comment">//新建节点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNodeByFrontToTail</span><span class="params">(pNode *pHead, DataType data)</span></span>;<span class="comment">//头插法</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintNodeProntToTail</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//正序打印</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InserttNodeByTailToFront</span><span class="params">(pNode *pHead, DataType data)</span></span>;<span class="comment">//尾插法</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">ReceiveNodeList</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//反转链表—一般方法</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">ReceiveNodeList_DG</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//反转链表——递归实现</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">MeryTwoSortNodeChangeOneSortNode</span><span class="params">(pNode pHead1, pNode pHead2)</span></span>;<span class="comment">//合并两个有序单链表——一般方法</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">MeryTwoSortNodeChangeOneSortNode_DG</span><span class="params">(pNode pHead1, pNode pHead2)</span></span>;<span class="comment">//合并两个有序单链表——递归实现</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BubbleSortNodeList</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//链表排序——冒泡法实现</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">SearchMIdNode</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//查找中间节点——快慢指针法</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">FindLastKNode</span><span class="params">(pNode pHead, <span class="keyword">int</span> key)</span></span>;<span class="comment">//找到倒数第K个节点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNotIntoKHead</span><span class="params">(pNode pos, DataType data)</span></span>;<span class="comment">// 非头结点前插入data</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">FindDataInNodeList</span><span class="params">(pNode pHead, DataType k)</span></span>;<span class="comment">//寻找链表中data为K的节点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteLastKNode</span><span class="params">(pNode pHead, <span class="keyword">int</span> key)</span></span>;<span class="comment">//删除倒数第K个节点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteNotTailNode</span><span class="params">(pNode pos)</span></span>;<span class="comment">//删除单链表的非尾结点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetCircleForJoseph</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//构造约瑟夫环</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetJosephCircle</span><span class="params">(pNode pHead, <span class="keyword">size_t</span> K)</span></span>;<span class="comment">//单链表实现约瑟夫环</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetCircleForList</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//构造带环链表</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">isHaveCircle</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//判断链表是否带环</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetCircleLength</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//求环的长度</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">GetCircleIntoNode</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//求环的入口点</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">pFrontNode</span><span class="params">(pNode pHead)</span></span>;<span class="comment">//返回链表第一个节点</span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">pTailNode</span><span class="params">(pNode pHead)</span></span>; <span class="comment">//返回链表最后一个节点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNotHead</span><span class="params">(pNode pos, DataType data)</span></span>;<span class="comment">// 非头结点前插入data</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure><h4 id="function-c"><a href="#function-c" class="headerlink" title="function.c"></a><code>function.c</code></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"function.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">BuyNewNode</span><span class="params">(DataType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pTempNode = <span class="literal">NULL</span>;</span><br><span class="line">pTempNode = (pNode)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(pNode));</span><br><span class="line"><span class="keyword">if</span> (pTempNode)</span><br><span class="line">&#123;</span><br><span class="line">pTempNode-&gt;data = data;</span><br><span class="line">pTempNode-&gt;_pNext = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pTempNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNodeByFrontToTail</span><span class="params">(pNode *pHead, DataType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pTemp = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">if</span> (*pHead == <span class="literal">NULL</span>)</span><br><span class="line">*pHead = BuyNewNode(data);</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">pTemp = BuyNewNode(data);</span><br><span class="line">pTemp-&gt;_pNext = *pHead;</span><br><span class="line">*pHead = pTemp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InserttNodeByTailToFront</span><span class="params">(pNode *pHead, DataType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pTest = <span class="literal">NULL</span>;</span><br><span class="line">pNode pCur = *pHead;</span><br><span class="line"></span><br><span class="line">pTest = BuyNewNode(data);</span><br><span class="line"><span class="keyword">if</span> (*pHead == <span class="literal">NULL</span>)</span><br><span class="line">(*pHead) = pTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">NULL</span> != pCur-&gt;_pNext)</span><br><span class="line">&#123;</span><br><span class="line">pCur = pCur-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line">pCur -&gt;_pNext = pTest;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">PrintNodeProntToTail</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//pNode pTemp = pHead;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="literal">NULL</span> == pHead)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pHead != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d -&gt; "</span>, pHead-&gt;data);</span><br><span class="line">pHead = pHead-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"NULL"</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">ReceiveNodeList</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pTest = pHead;</span><br><span class="line"><span class="comment">//pNode pNextNode = NULL;</span></span><br><span class="line">pNode pPre = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment">//pNode pReverse = NULL;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span> || pHead-&gt;_pNext == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> pHead;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pTest != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">pNode pNextNode = pTest-&gt;_pNext;</span><br><span class="line">pTest-&gt;_pNext = pPre;</span><br><span class="line">pPre = pTest;</span><br><span class="line">pTest = pNextNode;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pPre;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">ReceiveNodeList_DG</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pNewNode = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span> || pHead-&gt;_pNext == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> pHead;</span><br><span class="line"></span><br><span class="line">pNewNode = ReceiveNodeList_DG(pHead-&gt;_pNext);</span><br><span class="line"></span><br><span class="line">pHead-&gt;_pNext-&gt;_pNext = pHead;                       <span class="comment">//翻转链表的指向</span></span><br><span class="line">pHead-&gt;_pNext = <span class="literal">NULL</span>;                        <span class="comment">//记得赋值NULL，防止链表错乱</span></span><br><span class="line"><span class="keyword">return</span> pNewNode;                          <span class="comment">//新链表头永远指向的是原链表的链尾</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">MeryTwoSortNodeChangeOneSortNode</span><span class="params">(pNode pHead1, pNode pHead2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pNewNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pTemp = <span class="literal">NULL</span>;</span><br><span class="line">pNode pNextNode = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> Node1Len = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">unsigned</span> <span class="keyword">int</span> Node2Len = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pHead1-&gt;_pNext != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">++Node1Len;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (pHead1-&gt;_pNext != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">++Node2Len;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Node1Len &lt; Node2Len)     <span class="comment">//长的链表为pHead1</span></span><br><span class="line">&#123;</span><br><span class="line">pTemp = pHead1;</span><br><span class="line">pHead1 = pHead2;</span><br><span class="line">pHead2 = pTemp;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pHead1 != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pHead1-&gt;data &lt; pHead2-&gt;data)</span><br><span class="line">&#123;</span><br><span class="line">pNextNode = pHead1;</span><br><span class="line">pHead1 = pHead1-&gt;_pNext;</span><br><span class="line">pNextNode = pNextNode-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line">pNextNode = pHead2;</span><br><span class="line">pHead2 = pHead2-&gt;_pNext;</span><br><span class="line">pNextNode = pNextNode-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (pHead1 == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> pNewNode;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">pNextNode = pHead1;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pNewNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">MeryTwoSortNodeChangeOneSortNode_DG</span><span class="params">(pNode pHead1, pNode pHead2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pNewHead = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead1 == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> pHead2;</span><br><span class="line"><span class="keyword">else</span> <span class="keyword">if</span> (pHead2 == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> pHead1;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pHead1-&gt;data &gt; pHead2-&gt;data)</span><br><span class="line">&#123;</span><br><span class="line">pNewHead = pHead2;</span><br><span class="line">pNewHead-&gt;_pNext = MeryTwoSortNodeChangeOneSortNode_DG( pHead1, pHead2-&gt;_pNext);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">pNewHead = pHead1;</span><br><span class="line">pNewHead-&gt;_pNext = MeryTwoSortNodeChangeOneSortNode_DG(pHead1-&gt;_pNext, pHead2);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pNewHead;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">BubbleSortNodeList</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> pTempNode = <span class="number">0</span>;</span><br><span class="line">pNode pTail = <span class="literal">NULL</span>;</span><br><span class="line">pNode pPreCur = <span class="literal">NULL</span>;</span><br><span class="line">pNode pCur = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">int</span> isFlag = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span> || pHead-&gt;_pNext == <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pHead != pTail)</span><br><span class="line">&#123;</span><br><span class="line">isFlag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">pPreCur = pHead;</span><br><span class="line">pCur = pHead-&gt;_pNext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pCur != pTail)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pCur-&gt;data &lt; pPreCur-&gt;data)</span><br><span class="line">&#123;</span><br><span class="line">pTempNode = pCur-&gt;data;</span><br><span class="line">pCur-&gt;data = pPreCur-&gt;data;</span><br><span class="line">pPreCur-&gt;data = pTempNode;</span><br><span class="line"></span><br><span class="line">isFlag = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line">pPreCur = pCur;</span><br><span class="line">pCur = pCur-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (!isFlag)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">pTail = pPreCur;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">SearchMIdNode</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pFast = pHead;</span><br><span class="line">pNode pSlow = pHead;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span> || pHead-&gt;_pNext == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">NULL</span> != pFast &amp;&amp; <span class="literal">NULL</span> != pFast-&gt;_pNext)</span><br><span class="line">&#123;</span><br><span class="line">pSlow = pSlow-&gt;_pNext;</span><br><span class="line">pFast = pFast-&gt;_pNext-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pSlow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">FindLastKNode</span><span class="params">(pNode pHead, <span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pCur = pHead;</span><br><span class="line">pNode pSlow = pHead;</span><br><span class="line">pNode pFast = pHead;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span> )</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (key--)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pFast == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">pFast = pFast-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">while</span> (pFast != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">pFast = pFast-&gt;_pNext;</span><br><span class="line">pSlow = pSlow-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pSlow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteLastKNode</span><span class="params">(pNode pHead, <span class="keyword">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pPosDelNode = FindLastKNode(pHead, key+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pPosDelNode == pHead)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">free</span>(pPosDelNode);</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line">pPosDelNode-&gt;_pNext = pPosDelNode-&gt;_pNext-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">FindDataInNodeList</span><span class="params">(pNode pHead, DataType k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pCur = pHead;</span><br><span class="line"><span class="keyword">while</span> (pCur != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (pCur-&gt;data == k)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> pCur;</span><br><span class="line">&#125;</span><br><span class="line">pCur = pCur-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">pFrontNode</span><span class="params">(pNode pHead)</span>       <span class="comment">//返回链表第一个节点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pPcur = pHead;</span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">return</span> pPcur;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">pTailNode</span><span class="params">(pNode pHead)</span>    <span class="comment">//返回链表最后一个节点</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pPcur = pHead;</span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">while</span> (pPcur != <span class="literal">NULL</span> &amp;&amp; pPcur-&gt;_pNext != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">pPcur = pPcur-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pPcur;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetCircleForList</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pTemp = <span class="literal">NULL</span>;</span><br><span class="line">pTemp = FindDataInNodeList(pHead, <span class="number">9</span>);</span><br><span class="line">pTemp-&gt;_pNext = FindDataInNodeList(pHead, <span class="number">7</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">isHaveCircle</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pSlowNode = pHead;</span><br><span class="line">pNode pFastNode = pHead;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pFastNode != pSlowNode &amp;&amp; pFastNode-&gt;_pNext != <span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">pFastNode = pFastNode-&gt;_pNext-&gt;_pNext;</span><br><span class="line">pSlowNode = pSlowNode-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pSlowNode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetCircleLength</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode MeetNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pCur = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">size_t</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (isHaveCircle(pHead) == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">MeetNode = isHaveCircle(pHead);</span><br><span class="line">pCur = MeetNode-&gt;_pNext;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pCur != MeetNode)</span><br><span class="line">&#123;</span><br><span class="line">count++;</span><br><span class="line">pCur = pCur-&gt;_pNext;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function">pNode <span class="title">GetCircleIntoNode</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pCur = pHead;</span><br><span class="line"><span class="comment">//在判断带环问题时，返回了环中快慢指针的相遇点。</span></span><br><span class="line">pNode pMeetNodeInCircle = <span class="literal">NULL</span>;</span><br><span class="line">pMeetNodeInCircle = isHaveCircle(pHead);</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> (pCur != pMeetNodeInCircle)</span><br><span class="line">&#123;</span><br><span class="line">pCur = pCur-&gt;_pNext;</span><br><span class="line">pMeetNodeInCircle = pMeetNodeInCircle-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> pMeetNodeInCircle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetCircleForJoseph</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode front = <span class="literal">NULL</span>;</span><br><span class="line">pNode tail = <span class="literal">NULL</span>;</span><br><span class="line">front = pFrontNode(pHead);</span><br><span class="line">tail = pTailNode(pHead);</span><br><span class="line"></span><br><span class="line">tail-&gt;_pNext = front;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">GetJosephCircle</span><span class="params">(pNode pHead, <span class="keyword">size_t</span> K)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> count = K;</span><br><span class="line">pNode pPreNode = pHead;</span><br><span class="line">pNode pCurNode = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">while</span> (pPreNode-&gt;_pNext != pPreNode)</span><br><span class="line">&#123;</span><br><span class="line">count = K;</span><br><span class="line"><span class="keyword">while</span> (--count)</span><br><span class="line">&#123;</span><br><span class="line">pCurNode = pPreNode;</span><br><span class="line">pPreNode = pPreNode-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">pCurNode-&gt;_pNext = pPreNode-&gt;_pNext;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d 号出去-&gt; "</span>, pPreNode-&gt;data);</span><br><span class="line"><span class="comment">//free(pPreNode);</span></span><br><span class="line">pPreNode = pPreNode-&gt;_pNext;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//return pPreNode;</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n最后留下的人是： %d \n\n"</span>, pPreNode-&gt;data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GetNodeListLength</span><span class="params">(pNode pHead)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">pNode pCur = pHead;</span><br><span class="line"><span class="keyword">if</span> (pHead == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">while</span> (pCur)</span><br><span class="line">&#123;</span><br><span class="line">count++;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DeleteNotTailNode</span><span class="params">(pNode pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">assert(pos);</span><br><span class="line">pNode pTempNode = <span class="literal">NULL</span>;</span><br><span class="line">DataType temp = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">if</span> (pos == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="comment">//交换节点值</span></span><br><span class="line">temp = pos-&gt;data;</span><br><span class="line">pos-&gt;data = pos-&gt;_pNext-&gt;data;</span><br><span class="line">pos-&gt;_pNext-&gt;data = temp;</span><br><span class="line"></span><br><span class="line">pTempNode = pos-&gt;_pNext;</span><br><span class="line">pos-&gt;_pNext = pTempNode-&gt;_pNext;</span><br><span class="line"><span class="comment">//free(pTempNode);</span></span><br><span class="line">pTempNode = <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InsertNotHead</span><span class="params">(pNode pos, DataType data)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pNewNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pCur = <span class="literal">NULL</span>;</span><br><span class="line">DataType pTemp = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (pos == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">pNewNode = BuyNewNode(data);</span><br><span class="line"><span class="keyword">if</span> (pNewNode == <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">pCur = pos;</span><br><span class="line">pNewNode-&gt;_pNext = pCur-&gt;_pNext;</span><br><span class="line">pCur-&gt;_pNext = pNewNode;</span><br><span class="line"></span><br><span class="line">pTemp = pCur-&gt;data;</span><br><span class="line">pCur-&gt;data = pNewNode-&gt;data;</span><br><span class="line">pNewNode-&gt;data = pTemp;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="test-c"><a href="#test-c" class="headerlink" title="test.c"></a><code>test.c</code></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"function.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pNode pHead1 = <span class="literal">NULL</span>;</span><br><span class="line">pNode pHead2 = <span class="literal">NULL</span>;</span><br><span class="line">pNode pNewHead = <span class="literal">NULL</span>;</span><br><span class="line">pNode pHead3 = <span class="literal">NULL</span>;</span><br><span class="line">pNode pSortNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode LastKNum = <span class="number">0</span>;</span><br><span class="line">pNode pReverseNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pR = <span class="literal">NULL</span>;</span><br><span class="line">pNode pHead4 = <span class="literal">NULL</span>;</span><br><span class="line">pNode pCirclieNode = <span class="literal">NULL</span>;</span><br><span class="line"><span class="keyword">size_t</span> CircleLength = <span class="number">0</span>;</span><br><span class="line">pNode pIntoCircleNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pHead5 = <span class="literal">NULL</span>;</span><br><span class="line">pNode JueNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pHead6 = <span class="literal">NULL</span>;</span><br><span class="line">pNode pDelNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pInsertNode = <span class="literal">NULL</span>;</span><br><span class="line">pNode pH = <span class="literal">NULL</span>;</span><br><span class="line"></span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead1, <span class="number">9</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead1, <span class="number">8</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead1, <span class="number">6</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead1, <span class="number">5</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead1, <span class="number">2</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead1, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">PrintNodeProntToTail(pHead1);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n链表的反转、还原:\n"</span>);</span><br><span class="line">pReverseNode = ReceiveNodeList(pHead1);     <span class="comment">//反转</span></span><br><span class="line">PrintNodeProntToTail(pReverseNode);</span><br><span class="line"></span><br><span class="line">pR = ReceiveNodeList_DG(pReverseNode);      <span class="comment">//反转</span></span><br><span class="line">PrintNodeProntToTail(pR);</span><br><span class="line"></span><br><span class="line">pHead1 = pR;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\npHead1: "</span>);</span><br><span class="line">PrintNodeProntToTail(pHead1);          <span class="comment">//还原pHead1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">InserttNodeByTailToFront(&amp;pHead2, <span class="number">2</span>);</span><br><span class="line">InserttNodeByTailToFront(&amp;pHead2, <span class="number">3</span>);</span><br><span class="line">InserttNodeByTailToFront(&amp;pHead2, <span class="number">4</span>);</span><br><span class="line">InserttNodeByTailToFront(&amp;pHead2, <span class="number">5</span>);</span><br><span class="line">InserttNodeByTailToFront(&amp;pHead2, <span class="number">6</span>);</span><br><span class="line">InserttNodeByTailToFront(&amp;pHead2, <span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"pHead2: "</span>);</span><br><span class="line">PrintNodeProntToTail(pHead2);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n两个有序链表的合并:\n"</span>);</span><br><span class="line">pNewHead = MeryTwoSortNodeChangeOneSortNode_DG(pHead1, pHead2);</span><br><span class="line">PrintNodeProntToTail(pNewHead);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//新建无序链表3</span></span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">9</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">4</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">5</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">7</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">4</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">0</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead3, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\npHead3: "</span>);</span><br><span class="line">PrintNodeProntToTail(pHead3);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n排序好的链表3："</span>);</span><br><span class="line">BubbleSortNodeList(pHead3);</span><br><span class="line">PrintNodeProntToTail(pHead3);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\npHead1中间节点：%d\n"</span>, (SearchMIdNode(pHead1)-&gt;data));</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\npNewHead中间节点：%d\n"</span>, (SearchMIdNode(pNewHead)-&gt;data));</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n查找倒数第K个节点: "</span>);</span><br><span class="line">LastKNum = FindLastKNode(pNewHead, <span class="number">2</span>);</span><br><span class="line"><span class="keyword">if</span> (LastKNum != <span class="literal">NULL</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, LastKNum-&gt;data);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"没有找到\n"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n删除倒数第K个节点\n"</span>);</span><br><span class="line">DeleteLastKNode(pNewHead, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造一个带环链表4</span></span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">9</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">8</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">6</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">5</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">2</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">1</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">3</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">0</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead4, <span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n打印链表4：\n"</span>);</span><br><span class="line">PrintNodeProntToTail(pHead4);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n构造带环链表\n"</span>);</span><br><span class="line">GetCircleForList(pHead4);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"构造OK\n"</span>);</span><br><span class="line"></span><br><span class="line">pCirclieNode = isHaveCircle(pHead4);</span><br><span class="line"><span class="keyword">if</span> (pCirclieNode == <span class="literal">NULL</span>)</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"不带环\n"</span>);</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"带环\n"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n求环的长度："</span>);</span><br><span class="line"><span class="comment">//PrintNodeProntToTail(pHead4);</span></span><br><span class="line"></span><br><span class="line">CircleLength = GetCircleLength(pHead4);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d"</span>, CircleLength);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n求环的入口："</span>);</span><br><span class="line">pIntoCircleNode = GetCircleIntoNode(pHead4);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>, pIntoCircleNode-&gt;data);</span><br><span class="line"></span><br><span class="line"><span class="comment">//构造一个链表，pHead5：    头插法构造单链表</span></span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">9</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">8</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">7</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">6</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">5</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">4</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">3</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">2</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead5, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n约瑟夫环问题:\n"</span>);</span><br><span class="line"><span class="comment">//构造环</span></span><br><span class="line">GetCircleForJoseph(pHead5);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"构造OK\n"</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//PrintNodeProntToTail(pHead5);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//约瑟夫环</span></span><br><span class="line">GetJosephCircle(pHead5, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"构造链表6\n"</span>);</span><br><span class="line"></span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead6, <span class="number">6</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead6, <span class="number">5</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead6, <span class="number">4</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead6, <span class="number">3</span>);</span><br><span class="line">InsertNodeByFrontToTail(&amp;pHead6, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">PrintNodeProntToTail(pHead6);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n删除倒数第 3 个节点后，链表为：\n"</span>);</span><br><span class="line">DeleteLastKNode(pHead6, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">PrintNodeProntToTail(pHead6);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">PrintNodeProntToTail(pHead6);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"删除非尾节点 3 :\n"</span>);</span><br><span class="line">pDelNode = FindDataInNodeList(pHead6, <span class="number">3</span>);</span><br><span class="line">DeleteNotTailNode(pDelNode);</span><br><span class="line">PrintNodeProntToTail(pHead6);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n非头节点 5 前的插入:\n"</span>);</span><br><span class="line">PrintNodeProntToTail(pHead6);</span><br><span class="line"></span><br><span class="line">pInsertNode = FindDataInNodeList(pHead6, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">InsertNotHead(pInsertNode, <span class="number">99</span>);</span><br><span class="line">PrintNodeProntToTail(pHead6);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">test();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;对于不带头结点的单链表操作，是在面试中经常出现的，在此对于常见链表操作进行总结，&lt;br&gt;操作：有序链表合并、链表反转、链表排序、找倒数第K个节点、非头节点前插入data、删除非尾节点、约瑟夫环、带环链表环的大小等等&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="编程之美" scheme="http://yoursite.com/categories/%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E/"/>
    
    
      <category term="链表面试题" scheme="http://yoursite.com/tags/%E9%93%BE%E8%A1%A8%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    
      <category term="编程之美" scheme="http://yoursite.com/tags/%E7%BC%96%E7%A8%8B%E4%B9%8B%E7%BE%8E/"/>
    
      <category term="无头单链表" scheme="http://yoursite.com/tags/%E6%97%A0%E5%A4%B4%E5%8D%95%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
  <entry>
    <title>C语言版通讯录</title>
    <link href="http://yoursite.com/2018/06/17/C%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%E4%B8%80%E8%88%AC%E9%80%9A%E8%AE%AF%E5%BD%95/"/>
    <id>http://yoursite.com/2018/06/17/C语言实现一般通讯录/</id>
    <published>2018-06-17T07:09:27.000Z</published>
    <updated>2018-06-21T10:17:50.593Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><blockquote><p>C语言通讯录可以用来存储1000个人的信息，<br>每个人的信息包括姓名、年龄、性别、电话、住址,<br>实现基本的增、删、查、改、排序、打印、清空基本功能。</p></blockquote><hr><a id="more"></a><p><img src="http://p9ff104hp.bkt.clouddn.com/44.png" alt="图片加载失败"></p><h4 id="思路分析"><a href="#思路分析" class="headerlink" title="思路分析:"></a>思路分析:</h4><ul><li><p>首先我们可以分三个模块来解决这个问题，第一个模块我们需要一个头文件，这个头文件里可以包含一些相应信息，当实现文件和测试文件包含自己定义的头文件时便可以获得一些相关的信息。所以头文件里应该包括一个结构体，这个结构体里应包含姓名，性别，年龄，电话，住址。同时还可以定义一个结构体，这个结构体里包含通讯录，同时通讯录里人员的计数变量，将通讯录的地址传到别的地方便可以实现对它遍历或者其他操作。</p></li><li><p>第二个模块便是我们的测试函数，测试函数便可以实现我们的菜单打印，同时由我们接收不同的值便可以实现不同的操作，就是相应的方法的实现，这里很明显可以通过一个switch语句来控制功能选择，用do-while语句来控制重复选择的循环部分。</p></li></ul><ul><li>第三个模块便是我们的方法实现的函数，将模块2里定义的类型为通讯录的地址传到各个方法里，这样便可以实现对通讯录的操作。</li></ul><h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4><h5 id="头文件：-lt-contect-h-gt"><a href="#头文件：-lt-contect-h-gt" class="headerlink" title="头文件： &lt;contect.h&gt;"></a>头文件： <code>&lt;contect.h&gt;</code></h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;Windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> NAME_MAX 20</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> TEL_MAX 12</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> SEX_MAX 4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 1000</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span>&#123; Exit, Add, Del, Search, Modify, Empty, Sort, Show&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Stu</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">char</span> Name[NAME_MAX];</span><br><span class="line"><span class="keyword">int</span> Age;</span><br><span class="line"><span class="keyword">char</span> Tel[TEL_MAX];</span><br><span class="line"><span class="keyword">char</span> Sex[SEX_MAX];</span><br><span class="line"><span class="keyword">char</span> Address[<span class="number">50</span>];</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Stu</span> <span class="title">Stu</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Contact</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">Stu Con[MAX];       <span class="comment">//容量</span></span><br><span class="line"><span class="keyword">int</span> sz;     <span class="comment">//计数</span></span><br><span class="line">&#125;Contact, *pContact;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//函数声明</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitContact</span><span class="params">(pContact pCon)</span></span>;  <span class="comment">//初始化</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddContact</span><span class="params">(pContact pCon)</span></span>;   <span class="comment">//新建</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowContact</span><span class="params">(pContact pCon)</span></span>;  <span class="comment">//打印</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DelContact</span><span class="params">(pContact pCon)</span></span>;   <span class="comment">//删除</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SearchContact</span><span class="params">(pContact pCon)</span></span>;   <span class="comment">//查找</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ModifyContact</span><span class="params">(pContact pCon)</span></span>;    <span class="comment">//修改</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EmptyContact</span><span class="params">(pContact pCon)</span></span>;    <span class="comment">//清空</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SortContact</span><span class="params">(pContact pCon)</span></span>;    <span class="comment">//排序</span></span><br></pre></td></tr></table></figure><h5 id="函数实现：-contect-cpp"><a href="#函数实现：-contect-cpp" class="headerlink" title="函数实现： contect.cpp"></a>函数实现： <code>contect.cpp</code></h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> _CRT_SECURE_NO_WARNINGS 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"contect.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">InitContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pCon-&gt;sz = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">memset</span>(pCon-&gt;Con, <span class="number">0</span>, MAX * <span class="keyword">sizeof</span>(Stu));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">AddContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span>&lt;&lt;<span class="string">"请输入联系人姓名："</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pCon-&gt;Con[pCon-&gt;sz].Name;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入联系人年龄："</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pCon-&gt;Con[pCon-&gt;sz].Age;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入联系人电话："</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pCon-&gt;Con[pCon-&gt;sz].Tel;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入联系人性别："</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pCon-&gt;Con[pCon-&gt;sz].Sex;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入联系人地址："</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; pCon-&gt;Con[pCon-&gt;sz].Address;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"═════联系人 "</span> &lt;&lt; pCon-&gt;Con[pCon-&gt;sz].Name &lt;&lt; <span class="string">" 的信息保存成功════"</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">pCon-&gt;sz++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ShowContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╔═════════════════════════════════════════════════════════════╗"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%3s\t%6s\t%2s%16s%8s%20s\n"</span>,<span class="string">"║序号"</span>,<span class="string">"姓名"</span>,<span class="string">"年龄"</span>,<span class="string">"电话"</span>,<span class="string">"性别"</span>,<span class="string">"地址║"</span>);</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pCon-&gt;sz; i++)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%3d\t%6s\t%2d%16s%8s%20s\n"</span>,</span><br><span class="line">i + <span class="number">1</span>,</span><br><span class="line">pCon-&gt;Con[i].Name,</span><br><span class="line">pCon-&gt;Con[i].Age,</span><br><span class="line">pCon-&gt;Con[i].Tel,</span><br><span class="line">pCon-&gt;Con[i].Sex,</span><br><span class="line">pCon-&gt;Con[i].Address);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╚═════════════════════════════════════════════════════════════╝"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"温馨提示：输出完成！！！"</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">FindInContact</span><span class="params">(pContact pCon, <span class="keyword">char</span> *ch)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pCon-&gt;sz; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>(pCon-&gt;Con[i].Name,ch) == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">return</span> i;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DelContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch[<span class="number">20</span>];</span><br><span class="line">ShowContact(pCon);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"请输入上面通讯录中要删除联系人的姓名："</span>;</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, &amp;ch);</span><br><span class="line"><span class="keyword">int</span> NUM = FindInContact(pCon, ch);</span><br><span class="line"><span class="keyword">if</span> (<span class="literal">NULL</span> == <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"通讯录中没有该联系人！！！"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span> (NUM &lt;= pCon-&gt;sz &amp;&amp; NUM != <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = NUM; j &lt;= pCon-&gt;sz<span class="number">-1</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line">pCon-&gt;sz--;</span><br><span class="line">pCon-&gt;Con[j] = pCon-&gt;Con[j + <span class="number">1</span>];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"删除成功！！！\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SearchContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch[<span class="number">20</span>];</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请输出你要查找联系人的姓名："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, &amp;ch);</span><br><span class="line"><span class="keyword">int</span> NUM = FindInContact(pCon, ch);</span><br><span class="line"><span class="keyword">if</span> (NUM != <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╔═════════════════════════════════════════════════════════════╗"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%3s\t%6s\t%2s%16s%8s%20s\n"</span>, <span class="string">"║序号"</span>, <span class="string">"姓名"</span>, <span class="string">"年龄"</span>, <span class="string">"电话"</span>, <span class="string">"性别"</span>, <span class="string">"地址║"</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%3d\t%6s\t%2d%16s%8s%20s\n"</span>,</span><br><span class="line">NUM + <span class="number">1</span>,</span><br><span class="line">pCon-&gt;Con[NUM].Name,</span><br><span class="line">pCon-&gt;Con[NUM].Age,</span><br><span class="line">pCon-&gt;Con[NUM].Tel,</span><br><span class="line">pCon-&gt;Con[NUM].Sex,</span><br><span class="line">pCon-&gt;Con[NUM].Address);</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╚═════════════════════════════════════════════════════════════╝"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"你要找的联系人不存在\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">ModifyContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">char</span> ch[NAME_MAX];</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请输入要修改的联系人的姓名："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, &amp;ch);</span><br><span class="line"><span class="keyword">int</span> NUM = FindInContact(pCon, ch);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (NUM != <span class="number">-1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╔═════════════════════════════════════════════════════════════╗"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%3s\t%6s\t%2s%16s%8s%20s\n"</span>, <span class="string">"║序号"</span>, <span class="string">"姓名"</span>, <span class="string">"年龄"</span>, <span class="string">"电话"</span>, <span class="string">"性别"</span>, <span class="string">"地址║"</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%3d\t%6s\t%2d%16s%8s%20s\n"</span>,</span><br><span class="line">NUM,</span><br><span class="line">pCon-&gt;Con[NUM].Name,</span><br><span class="line">pCon-&gt;Con[NUM].Age,</span><br><span class="line">pCon-&gt;Con[NUM].Tel,</span><br><span class="line">pCon-&gt;Con[NUM].Sex,</span><br><span class="line">pCon-&gt;Con[NUM].Address);</span><br><span class="line"></span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╚═════════════════════════════════════════════════════════════╝"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请把姓名修改成："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, pCon-&gt;Con[NUM].Name);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请把年龄修改成："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;pCon-&gt;Con[NUM].Age);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请把电话修改成："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, pCon-&gt;Con[NUM].Tel);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请把性别修改成："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, pCon-&gt;Con[NUM].Sex);</span><br><span class="line"></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"请把地址修改成："</span>);</span><br><span class="line"><span class="built_in">scanf</span>(<span class="string">"%s"</span>, pCon-&gt;Con[NUM].Address);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">EmptyContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">pCon-&gt;sz = <span class="number">0</span>;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"清空成功！！！\n\n"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">SortContact</span><span class="params">(pContact pCon)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; pCon-&gt;sz; i++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; pCon-&gt;sz-i<span class="number">-1</span>; j++)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">strcmp</span>(pCon-&gt;Con[j].Name, pCon-&gt;Con[j + <span class="number">1</span>].Name)&gt;<span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">Stu temp;</span><br><span class="line">temp = pCon-&gt;Con[j];</span><br><span class="line">pCon-&gt;Con[j] = pCon-&gt;Con[j + <span class="number">1</span>];</span><br><span class="line">pCon-&gt;Con[j + <span class="number">1</span>] = temp;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="测试函数：-test-cpp"><a href="#测试函数：-test-cpp" class="headerlink" title="测试函数： test.cpp"></a>测试函数： <code>test.cpp</code></h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">"contect.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">menu</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╔═══════════════════════════════════════════════════╗"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══════════════════  通讯录  ══════════════════════║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══                                             ═══║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══           1.新建           2.删除           ═══║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══           3.查找           4.修改           ═══║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══           5.清空           6.排序           ═══║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══           7.打印           0.退出           ═══║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"║═══                                             ═══║"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"╚═══════════════════════════════════════════════════╝"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">system(<span class="string">"color c"</span>); <span class="comment">//改变背景</span></span><br><span class="line">Contact my_con;</span><br><span class="line">InitContact(&amp;my_con);</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> input = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">&#123;</span><br><span class="line">menu();</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"请选择："</span>;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; input;</span><br><span class="line"></span><br><span class="line"><span class="keyword">switch</span> (input)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">case</span> Exit:</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Add:</span><br><span class="line">AddContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Del:</span><br><span class="line">DelContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Search:</span><br><span class="line">SearchContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Modify:</span><br><span class="line">ModifyContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Empty:</span><br><span class="line">EmptyContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Sort:</span><br><span class="line">SortContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> Show:</span><br><span class="line">ShowContact(&amp;my_con);</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"选择错误：-&gt;!!!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="keyword">while</span> (input);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">test();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h5><p><img src="http://p9ff104hp.bkt.clouddn.com/777777.png" alt="图片加载失败"></p><h4 id="问题思考"><a href="#问题思考" class="headerlink" title="问题思考"></a>问题思考</h4><p>1、改写成链表存储，不同存储结构的区别？</p><p>2、动态版通讯录、文件版通讯录设计？</p><p>3、编写大型通讯录系统，将通讯录数据存储在数据库中？</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;C语言通讯录可以用来存储1000个人的信息，&lt;br&gt;每个人的信息包括姓名、年龄、性别、电话、住址,&lt;br&gt;实现基本的增、删、查、改、排序、打印、清空基本功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="小项目" scheme="http://yoursite.com/categories/%E5%B0%8F%E9%A1%B9%E7%9B%AE/"/>
    
    
      <category term="C语言版通讯录" scheme="http://yoursite.com/tags/C%E8%AF%AD%E8%A8%80%E7%89%88%E9%80%9A%E8%AE%AF%E5%BD%95/"/>
    
      <category term="结构体存储通讯录" scheme="http://yoursite.com/tags/%E7%BB%93%E6%9E%84%E4%BD%93%E5%AD%98%E5%82%A8%E9%80%9A%E8%AE%AF%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>TCP连接的建立和关闭过程及相关面试问题详解（三次握手&amp;四次挥手&amp;面试问题）</title>
    <link href="http://yoursite.com/2018/06/15/TCP%E5%BB%BA%E7%AB%8B%E5%92%8C%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B%EF%BC%88%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B&amp;%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B%EF%BC%89/"/>
    <id>http://yoursite.com/2018/06/15/TCP建立和断开连接过程（三次握手&amp;四次挥手）/</id>
    <published>2018-06-15T00:25:40.000Z</published>
    <updated>2018-07-09T05:52:18.895Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><blockquote><p>三次握手、四次挥手问题是面试中一定会问到的，包括在《高质量C/C++编程》一书中也有类似的习题。这篇blog就TCP连接的建立和关闭过程及相关面试问题做一个详解，如有错误，望指正。<br>如果对TCP还不了解，可以先阅读这篇文章：      <a href="https://blog.csdn.net/m0_37925202/article/details/80899012" target="_blank" rel="noopener">TCP固定头部结构详解</a></p></blockquote><hr><a id="more"></a><h4 id="三次握手："><a href="#三次握手：" class="headerlink" title="三次握手："></a>三次握手：</h4><blockquote><p>三次握手是就是TCP在建立连接时的过程。 TCP是主机对主机层的传输控制协议，提供可靠的连接服务，采用三次握手确认建立一个连接。</p></blockquote><p><img src="https://img-blog.csdn.net/2018070317043637?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTI1MjAy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图述"></p><p>A主机运行TCP客户端程序，B主机运行TCP服务器端程序，在A主机发送SYN之前，客户端和主机都处于CLOSED状态。</p><p>B主机先创建传输控制块PCB。准备接收客户端的请求，然后服务器端进入LISTEN状态，等待客户端连接请求。</p><ul><li><strong>第一次握手</strong></li></ul><blockquote><p>TCP客户端先创建传输控制块PCB，然后向服务器B发送连接请求报文段，此时首部中的同步位SYN置位1，同时选择一个初始序号seq = x，这是TCP客户端进入SYN-SENT（同步已发送）状态。</p></blockquote><ul><li><strong>第二次握手</strong></li></ul><blockquote><p>服务器B收到A发送的连接请求报文段后，如果同意连接，则向A发送确认，<br>在确认报文段中，将ACK和SYN都置为1，确认号是ack = x + 1，同时也为自己选择一个初始序号seq = y，这是TCP服务器进入SYN-RCVD（同步收到）状态。</p></blockquote><ul><li><strong>第三次握手</strong></li></ul><blockquote><p>TCP客户端收到B发送的确认后，还要向B给出确认，确认报文ACK置为1，确认号ack = y + 1，自己的序号为seq = x + 1。TCP协议规定，ACK报文段可以携带数据，如果不携带数据，则不消耗序号，则下一数据报文段的序号仍然为seq = x + 1，这时TCP已经建立连接，A进入ESTABLISHED（已建立连接状态）。当B收到A的确认后也进入ESTANLISHED状态。</p></blockquote><p>上面这种建立连接的过程称为三次握手。</p><p><code>【面试问题1】为什么A还要再发送一次确认呢？</code></p><blockquote><p>这是为了防止某些失效的连接请求报文再次传送给服务器B而导致出错。<br>失效连接报文来源？<br>假如TCP连接就是两次握手，如果说客户端A给服务器端B发送了连接请求报文段，但是报文段丢失，导致B没有收到，于是A重传连接请求，第二次的服务器端B收到了连接请求，建立了连接。数据传输完成后就释放连接。在这个过程中，客户端A共发送两次连接请求报文，一个报文丢失，另一个报文到达了B。不存在“已失效的连接报文”。</p></blockquote><blockquote><p>现在考虑另一种特诉情况，主机A第一次发送的连接请求并没有丢失，而是因为网络节点导致延迟达到主机B，主机B以为是主机A又发起的新连接，于是主机B同意连接，并向主机A发回确认，但是此时主机A根本不会理会，主机B就一直在等待主机A发送数据，导致主机B的资源浪费。</p></blockquote><h4 id="四次挥手："><a href="#四次挥手：" class="headerlink" title="四次挥手："></a>四次挥手：</h4><blockquote><p>四次挥手是TCP释放连接的过程，具体过程请看下图分析。</p></blockquote><p><img src="https://img-blog.csdn.net/20180703184755649?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L20wXzM3OTI1MjAy/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="TCP断开连接的过程"></p><p>完成数据传输后，通信的双方都可以释放连接，主机A、B先都处于ESTABLISHED状态。</p><ul><li><strong>第一次挥手</strong></li></ul><p>A的应用进程先向其TCP发送连接释放报文段，A停止再发送数据，主动关闭TCP连接，A把连接释放报文段首部的FIN置1，其序号seq = u，它等于前面已经传送过的数据的最后一个字节序号加1。这时A进入FIN-WAIT-1（终止等待1）状态，等待B的确认，注意：TCP规定，FIN报文段即使不携带数据也要消耗一个序号。</p><ul><li><strong>第二次挥手</strong></li></ul><p>B收到连接释放报文段后，立即发出确认，确认号是ask = u + 1，而这个报文段自己的序号是v，等于B前面已传送过的数据的最后一个字节的序号加1。然后B就进入CLOSE-WAIT（关闭等待）状态，TCP服务器进程这时应通知高层应用进程，因而从A到B这个方向的连接就释放了，这时的TCP处于半关闭状态，即A已经没有数据要发送了，但B若要发送数据，A仍要接收，也就是说，从B到A的方向连接并灭有关闭。这个状态可能会持续一些时间。</p><ul><li><strong>第三次挥手</strong></li></ul><p>A收到来自B的确认后，就进入FIN-WAIT-2（终止等待2）状态，等待B发出的连接请求释放报文段。</p><p>若B已经没有要向A发送的数据，其应用进程就通知TCP释放连接。这时B发出的连接释放报文段必须使FIN = 1，现假定B的序号为w（在半关闭状态B可能又发送了一些数据）。B还必须重复上次已发送过的确认号akc = u + 1。这时B就进入LAST-ACK（最后确认）状态，等待A的确认。</p><ul><li><strong>第四次挥手</strong></li></ul><p>A在收到B的连接释放报文段后，必须对此发出确认。在确认报文段中把ACK置1，确认号ack = w + 1，而自己的序号是seq = u + 1（根据TCP标准，前面发送的FIN报文段要消耗一个序号）。然后进入到TIME-WAIT（时间等待）状态。请注意，现在TCP连接连接还没有释放掉。必须经过时间等待计时器（TIME-WAIT）设置的时间2MSL后，A才进入到CLOSED状态。时间MSL叫做最长报文段寿命。MSL是根据工程来设置时长的，假设为2min。因此从A进入到TIME-WAIT状态后，要经过4分钟才能进入到CLOSED状态，才能开始建立下一个新的连接。当A撤销相应的传输控制块TCB后，就结束了这次的TCP连接。</p><p><code>【面试问题2】为什么A在TIME-WAIT状态必须等待2MSL的时间呢？</code></p><blockquote><p>这有两个原因：<br>第一：为了保证A发送的最后一个ACK报文段能够到达B，这个报文段有可能丢失，因而使处在LAST-WAIT的状态B收不到对方已发送的FIN-ACK报文段的确认，B会超时重传这个FIN + ACK报文段，而A就能在2MSL时间内接收到这个重传的FIN + ACK报文段，接着A重传一次确认，重新启动2MSL计时器。最后，A和B都正常进入到CLOSED状态。如果A在TINE-WAIT装态不等待一段时间，而是在发送完ACK报文段后立即释放连接，那么久无法收到B重传的FIN + ACK报文段，因而也不会再发送一次确认报文段。这样，B就无法按正常步骤进入CLOSED状态。<br>第二：防止上文提到的“已失效的连接请求报文”出现在本连接中。A发送完最后一个ACK报文段后，再经过时间2MSL，就可以使本连接持续的时间内所产生的所有报文段都从网络中消失。这样可以使下一个新的连接中不会出现这种旧的连接请求报文段。<br>B只要收到A发出的确认，就进入CLOSED状态，同样，B在撤销相应的传输控制块TCB后，就结束了这次的TCP连接，我们注意到，B结束TCP连接的时间要比A早一些。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;三次握手、四次挥手问题是面试中一定会问到的，包括在《高质量C/C++编程》一书中也有类似的习题。这篇blog就TCP连接的建立和关闭过程及相关面试问题做一个详解，如有错误，望指正。&lt;br&gt;如果对TCP还不了解，可以先阅读这篇文章：      &lt;a href=&quot;https://blog.csdn.net/m0_37925202/article/details/80899012&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;TCP固定头部结构详解&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="SO Kernals" scheme="http://yoursite.com/categories/SO-Kernals/"/>
    
    
      <category term="ACK机制" scheme="http://yoursite.com/tags/ACK%E6%9C%BA%E5%88%B6/"/>
    
      <category term="TCP连接过程" scheme="http://yoursite.com/tags/TCP%E8%BF%9E%E6%8E%A5%E8%BF%87%E7%A8%8B/"/>
    
      <category term="TCP断开连接" scheme="http://yoursite.com/tags/TCP%E6%96%AD%E5%BC%80%E8%BF%9E%E6%8E%A5/"/>
    
      <category term="三次握手" scheme="http://yoursite.com/tags/%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B/"/>
    
      <category term="四次挥手" scheme="http://yoursite.com/tags/%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B/"/>
    
  </entry>
  
  <entry>
    <title>保证TCP协议的可靠传输</title>
    <link href="http://yoursite.com/2018/05/31/TCp%E5%8D%8F%E8%AE%AE%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/"/>
    <id>http://yoursite.com/2018/05/31/TCp协议可靠传输/</id>
    <published>2018-05-31T14:34:00.000Z</published>
    <updated>2018-06-21T10:17:49.076Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><blockquote><p>TCP协议在网络传输中保证了其可靠性，本篇文章对TCP协议可靠传输机制做了详细介绍，<br>介绍：（ACK机制&amp;滑动窗口&amp;拥塞控制&amp;流量控制）。</p></blockquote><hr><a id="more"></a><h4 id="回顾内容"><a href="#回顾内容" class="headerlink" title="回顾内容"></a>回顾内容</h4><blockquote><p>传输层使用的两个主要协议：TCP和UDP</p></blockquote><ul><li><strong>TCP 主要特性有特性有以下几点：</strong></li></ul><p>　　(1)面向连接，在数据传送前必须建立连接，在数据传送结束后必须释放连接。在一个TCP连接中，仅有两方进行彼此通信。广播和多播不能用于TCP。</p><p>　　(2)点对点，每一条TCP连接只能有两个端点。从socket角度来说，通信双方需要建立套接字，套接字由IP地址和端口号组成，数据到达传输层之后会被送到端口对应的应用程序。</p><p>　　(3)提供可靠交付服务。</p><p>　　(4)支持全双工通信。</p><p>　　(5)面向字节流。面向报文的传输方式是应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文。因此，应用程序必须选择合适大小的报文。若报文太长，则IP层需要分片，降低效率。若太短，会是IP太小。UDP对应用层交下来的报文，既不合并，也不拆分，而是保留这些报文的边界。这也就是说，应用层交给UDP多长的报文，UDP就照样发送，即一次发送一个报文。面向字节流的话，虽然应用程序和TCP的交互是一次一个数据块(大小不等)，但TCP把应用程序数据看成是一连串的无结构的字节流。TCP有一个缓冲，当应用程序传送的数据块太长，TCP就可以把它划分短一些再传送。如果应用程序一次只发送一个字节，TCP也可以等待积累有足够多的字节后再构成报文段发送出去。</p><hr><h4 id="总述"><a href="#总述" class="headerlink" title="总述"></a>总述</h4><p>1、确认应答（ACK）机制：</p><p>2、超时重传机制：<br>　　接收方收到报文就会确认，发送方发送一段时间后没有收到确认就重传。</p><p>3、滑动窗口机制：</p><p>4、数据校验：</p><p>　　TCP将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP将丢弃这个报文段和不确认收到此报文段。</p><p>5、数据合理分片和排序：</p><p>　　UDP：IP数据报大于1500字节,大于MTU.这个时候发送方IP层就需要分片.把数据报分成若干片,使每一片都小于MTU.而接收方IP层则需要进行数据报的重组.这样就会多做许多事情,而更严重的是,由于UDP的特性,当某一片数据传送中丢失时,接收方便无法重组数据报.将导致丢弃整个UDP数据报.</p><p>　　TCP会按MTU合理分片，接收方会缓存未按序到达的数据，重新排序后再交给应用层。</p><p>5、流量控制：<br>　　当接收方来不及处理发送方的数据，就提示发送方降低发送的速率，防止包丢失。</p><p>7、拥塞控制：<br>　　当网络拥塞时，减少数据的发送。</p><blockquote><p>上面简单的讲了TCP保证可靠传输的几个机制，下面对较难理解的面深入探究。</p></blockquote><hr><h4 id="滑动窗口"><a href="#滑动窗口" class="headerlink" title="滑动窗口"></a>滑动窗口</h4><h5 id="滑动窗口是干什么的？"><a href="#滑动窗口是干什么的？" class="headerlink" title="滑动窗口是干什么的？"></a>滑动窗口是干什么的？</h5><p>有一种机制叫做ACK确认应答【过程如图】，收到数据段，给发送一个ACK确认应答，收到ACK应答后，再发送数据段，明显会降低效率，如果数据往返时间较长时，会影响到性能。</p><p><img src="http://p9ff104hp.bkt.clouddn.com/ACK%E7%A1%AE%E8%AE%A4%E6%9C%BA%E5%88%B6.png" alt="这里写图片描述"></p><p>上面这种方式浪费效率，如果换种方式发送呢  ^_^</p><ul><li>一次发送多个数据段，统一确认后，再发送多个数据段。</li></ul><p><img src="http://p9ff104hp.bkt.clouddn.com/%E5%A4%9A%E6%95%B0%E6%8D%AE%E5%8F%91%E9%80%81%E5%BA%94%E7%AD%94.png" alt="这里写图片描述"></p><blockquote><p>上面这种传送机制就是窗口机制。</p></blockquote><ul><li>窗口是什么？</li></ul><p><img src="http://p9ff104hp.bkt.clouddn.com/%E7%AA%97%E5%8F%A3%E5%A4%A7%E5%B0%8F.png" alt="这里写图片描述"></p><p>窗口大小：就是无需等到确认应答而可以继续发送数据的最大值。（上图窗口就是4000字节，也就是四个段）</p><ul><li>传输过程：</li></ul><p>1、客户端和服务器端各自建立套接字，通过彼此的套接字进行通信；</p><p>2、服务器端绑定监听端口，然后监听，循环等待来自客户端的连接；</p><p>3、一旦收到来自客户端的连接，进行三次握手，一旦连成功就fork()一个子进程来处理和当前客户端的连接，然后父进程继续监听客户端的连接；</p><p>4、发送前面四个段，无需ACK确认应答，直接发送；</p><p>5、收到第一个ACK后，滑动窗口向后移动，发送第五个数据段，以此类推；</p><p>6、操作系统为了维护这个滑动窗口，需要开辟发送缓冲区来记录当前还有那些数据没有应答，只有确认应答过的数据，才能从缓冲区删掉；</p><p>7、一旦数据传输完毕就是放连接。</p><blockquote><p>就是说随着时间推移，滑动窗口也在推移，滑动窗口的会变化，内部缓存数据不停的更新，根据网络的拥塞情况，发送端可以调控滑动窗口的大小来控制流量 ，滑动窗口就是一个滑的过程啊~     ^<em>*  ~ ^</em>*   可能解释的有点啰嗦了</p></blockquote><p>4、窗口越大，网络吞吐量就越高。</p><blockquote><p>吞吐量就是单位时间内通过某个网络（信道、接口）的数据量。</p></blockquote><ul><li>接收窗口大小取决于应用（比如说tomcat：8080端口的监听进程）、系统、硬件的限制。</li></ul><hr><h5 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h5><p>简单来说就是接收方处理不过来的时候，就把窗口缩小，并把窗口值告诉发送端。</p><p><img src="http://p9ff104hp.bkt.clouddn.com/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E4%B8%BE%E4%BE%8B.png" alt="这里写图片描述"></p><p>　　当窗口值为0，而接受方把窗口值恢复（比如ACK=1，ack=601，rwnd=200），但确认丢失，进入相互等待的死锁局面。所以如果窗口值为0，发送端就会开启一个持续计数器，每个一段时间询问一下接收方。</p><hr><h5 id="拥塞控制"><a href="#拥塞控制" class="headerlink" title="拥塞控制"></a>拥塞控制</h5><ul><li>什么是拥塞？</li></ul><p>　　是指计算机网络中，某一个时段，某一资源的需求量超过了该资源可提供的可用部分，网络性能变差。</p><ul><li>什么是拥塞控制？</li></ul><p>　　所谓的拥塞控制就是防止过多的数据注入到网络中，这样可以使网络中的路由器或者节点不至于过载，拥塞控制是一个全局的过程。</p><ul><li>几种拥塞控制的方法：因特网建议标准RFC定义了几种拥塞控制的算法；</li></ul><blockquote><ul><li>满开始，拥塞避免，</li><li>快重传，快恢复。</li></ul></blockquote><ul><li><strong>拥塞控制描述：</strong></li></ul><p>　　唯一的方法就是尝试各种不同的发送速度。比如一开始以 100kb/s 的速率发送数据，如果没问题，再将速率提高到 200kb/s，再没问题继续提升发送速率。一旦达到某个上限后，便开始出现丢包现象，发送方就可以认为，网络已经拥塞了，于是降低发送速率，减轻网络负担。</p><ul><li><strong>控制流程简述：</strong></li></ul><blockquote><p><strong>慢开始、拥塞避免</strong></p></blockquote><p>　　发送方维持一个拥塞窗口的状态变量，其大小取决于网络的拥塞程度，动态地变化，而发送窗口一般取拥塞窗口和对方给出的接收窗口的最小值（为了便于描述，后面的分析中假定对方给出的接收窗口足够大，这样将发送窗口等于拥塞窗口就可以了）。</p><p>　　慢开始算法的核心是从小到大逐渐增大发送窗口，也就是说，从小到大逐渐增大拥塞窗口的数值。通常在刚开始发送报文段时，先把拥塞窗口设置为一个最大报文段MSS的数值，而在每收到对上一轮报文段（，每次加倍后的报文段的个数，可能不止一个报文段）的确认后，就把拥塞窗口的数值加倍。</p><p>　　为了防止拥塞窗口增长过大引起网络拥塞，还需要维护一个慢开始门限的状态变量，当拥塞窗口的值小于慢开始门限时，使用慢开始算法，一旦拥塞窗口的值大于慢开始门限的值，就改用拥塞避免算法。</p><p>　　拥塞避免算法的思路是让拥塞窗口缓慢地增大，收到每一轮的确认后，将拥塞窗口的值加1，而不是加倍，这样拥塞窗口的值按照线性规律缓慢增长。</p><p>　　无论是在慢开始阶段还是在拥塞避免阶段，只要发送方判断网络出现拥塞（没有按时收到确认），就把慢开始门限设置为出现拥塞时发送窗口值的一般，但最小不能小于2个MSS值，而后把拥塞窗口的值重新设置为1个MSS，执行慢开始算法。</p><blockquote><p><strong>快重传，快恢复</strong></p></blockquote><p>　　快重传算法首先要求接收方每收到一个失序的报文段后就立即发出重复确认（重复发送对前面有序部分的确认），而不是等待自己发送数据时才进行稍待确认，也不是累积收到的报文发送累积确认，如果发送方连续收到三个重复确认，就应该立即重传对方未收到的报文段（有收到重复确认，说明后面的报文段都送达了，只有中间丢失的报文段没送达）。</p><p>快恢复算法与快重传算法配合使用，其过程有如下两个要点：</p><p>　　1、当发送方连续收到三个重复确认时，就把慢开始门限减半，这是为了预防网络发生拥塞。注意，接下来不执行慢开始算法。</p><p>　　2、由于发送方现在认为网络很很可能没有发生特别严重的阻塞（如果发生了严重阻塞的话，就不会一连有好几个报文段到达接收方，就不会导致接收方连续发送重复确认），因此与慢开始不同之处是现在不执行慢开始算法（即拥塞窗口的值不设为1个MSSS），而是把拥塞窗口的值设为慢开始门限减半后的值，而后开始执行拥塞避免算法，线性地增大拥塞窗口。</p><h4 id="问题思考"><a href="#问题思考" class="headerlink" title="问题思考"></a>问题思考</h4><p>1、网络拥堵是怎么来的？</p><p>2、RFC 定义的 4 种拥塞控制算法是什么？分别讲述流程以及原理？</p><p>3、为什么TCP传输这么复杂？</p><blockquote><p>因为要保证可靠传输，同时又要尽可能提高性能。</p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;TCP协议在网络传输中保证了其可靠性，本篇文章对TCP协议可靠传输机制做了详细介绍，&lt;br&gt;介绍：（ACK机制&amp;amp;滑动窗口&amp;amp;拥塞控制&amp;amp;流量控制）。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="SO Kernal" scheme="http://yoursite.com/categories/SO-Kernal/"/>
    
    
      <category term="ACK机制" scheme="http://yoursite.com/tags/ACK%E6%9C%BA%E5%88%B6/"/>
    
      <category term="TCP协议" scheme="http://yoursite.com/tags/TCP%E5%8D%8F%E8%AE%AE/"/>
    
      <category term="滑动窗口" scheme="http://yoursite.com/tags/%E6%BB%91%E5%8A%A8%E7%AA%97%E5%8F%A3/"/>
    
      <category term="拥塞控制" scheme="http://yoursite.com/tags/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/"/>
    
      <category term="流量控制" scheme="http://yoursite.com/tags/%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>UDP协议实现回显服务器</title>
    <link href="http://yoursite.com/2018/05/22/%E5%9F%BA%E4%BA%8EUDP%E5%8D%8F%E8%AE%AE%E7%9A%84%E5%9B%9E%E6%98%BE%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    <id>http://yoursite.com/2018/05/22/基于UDP协议的回显服务器/</id>
    <published>2018-05-21T17:14:30.000Z</published>
    <updated>2018-06-23T14:38:15.466Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><blockquote><p>回显服务器的代码实现过程，文章加入了详细的设计过程以及其他的计算机网络理论知识。<br>操作环境：CentOS 7.0 X64 操作系统、Vim编辑器、Gcc编译器。</p></blockquote><hr><a id="more"></a><p><img src="http://p9ff104hp.bkt.clouddn.com/%E7%BD%91%E7%BB%9C.jpg" alt="图片加载失败"></p><h4 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h4><ul><li>本文的目的是写回显服务器，在撸代码之前，先来个热身。</li></ul><h5 id="IP地址是什么"><a href="#IP地址是什么" class="headerlink" title="IP地址是什么"></a>IP地址是什么</h5><p>IP地址有IPV4、IPV6之分，一般不特俗说明，默认就是IPV4。</p><blockquote><p>IP地址是用来标识不同的主机，每个主机都有唯一的IP地址；<br>对于IP4来说，IP地址是一个4字节，32位整数；<br>IP地址用“点分”制表示，如：192.168.1.11（用点分割的每个数范围0~255）。</p></blockquote><h5 id="源IP地址-amp-目的IP地址"><a href="#源IP地址-amp-目的IP地址" class="headerlink" title="源IP地址&amp;目的IP地址"></a>源IP地址&amp;目的IP地址</h5><blockquote><p>很容易理解，都是地址，和寄快递的收发地址一样，从上海发往西安的快递，源IP就是上海，目的IP就是西安。</p></blockquote><h5 id="端口号是什么"><a href="#端口号是什么" class="headerlink" title="端口号是什么"></a>端口号是什么</h5><ul><li>端口号是传输层协议内容</li></ul><blockquote><p>端口号是2字节196位整数；<br>端口号用来标识一个进程，告诉操作系统，当前数据要交给哪一个进程来处理；<br><strong>一个进程可以绑定多个端口号，但是一个端口号不可以绑定多个进程。</strong></p></blockquote><h5 id="源端口号-amp-目的端口号"><a href="#源端口号-amp-目的端口号" class="headerlink" title="源端口号&amp;目的端口号"></a>源端口号&amp;目的端口号</h5><blockquote><p>在源IP&amp;目的IP中，我们用的寄快递的例子帮助理解，在这里，还是用发快递帮助理解。源IP与目的IP标识了发件人地址和收件人的地址，地址有了，那么包裹就会交给快递员运送每个，快递员都有一个工号，工号是唯一的。这就对应了数据传输过程中，由哪个进程来处理数据。再来到寄快递问题上，有的快递包裹比较大，这就要多个快递员来运输，那么一个包裹由多个快递员运输，记在物流信息上就是这样的格式：一个包裹的目的地 + 多个快递员工号；这家公司接的都是大包裹，一个快递员只能送一个包裹。对应到网络传输中，就是一个进程可以绑定多个端口号，但一个端口号不可以绑定多个进程。</p></blockquote><hr><h4 id="函数介绍"><a href="#函数介绍" class="headerlink" title="函数介绍"></a>函数介绍</h4><ul><li>为后面撸代码介绍几个函数。</li></ul><h5 id="网络字节序："><a href="#网络字节序：" class="headerlink" title="网络字节序："></a>网络字节序：</h5><p>在C语言中我们知道，内存中的数据存储有大小端之分；数据在磁盘中存储也有大小端之分，在这里我还想啰嗦一个C语言问题，怎样判断自己的计算机内存是大端字节序还是小端字节序存储方式？[假装思索……]</p><ul><li>大小端判断很有可能成为你将来的面试题。以前我总结过这样的问题。</li><li>以后再附上链接：哈哈</li></ul><ul><li>（只想引入下面一句话）在网络数据流中同样有大小端之分，那么如何定义网络数据流的地址呢？</li></ul><p>【看图理解】</p><p><img src="http://p9ff104hp.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%8F%91%E9%80%81.jpg" alt="图片加载失败"></p><p>【看图说话】</p><p><img src="http://p9ff104hp.bkt.clouddn.com/%E8%A7%84%E5%AE%9A.jpg" alt="图片加载失败"></p><ul><li>如果发送主机是小端，就要准换成大端再发送，如果是大端，直接发送即可。</li></ul><blockquote><p>为了使网络程序具有可移植性,使同样的C代码在大端和小端计算机上编译后都能正常运行,可以调用以下库函数做网络字节序和主机字节序的转换。</p></blockquote><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line">   <span class="keyword">uint32_t</span> htonl(<span class="keyword">uint32_t</span> hostlong);</span><br><span class="line">   <span class="keyword">uint16_t</span> htons(<span class="keyword">uint16_t</span> hostshort);</span><br><span class="line">   <span class="keyword">uint32_t</span> ntohl(<span class="keyword">uint32_t</span> netlong);</span><br><span class="line">   <span class="keyword">uint16_t</span> ntohs(<span class="keyword">uint16_t</span> netshort);</span><br></pre></td></tr></table></figure><blockquote><p>调用函数就能解决存储字节序不统一的问题</p></blockquote><h5 id="socket编程常见API："><a href="#socket编程常见API：" class="headerlink" title="socket编程常见API："></a>socket编程常见API：</h5><p>这部分只把函数列出来，详细介绍请戳作者下面博客：</p><p><strong> 请戳： </strong><a href="https://blog.csdn.net/m0_37925202/article/details/80286946" target="_blank" rel="noopener">socket套接字总结</a></p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建socket文件描述符  (TCP/UDP,客户端+服务器)</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">socket</span><span class="params">(<span class="keyword">int</span> domain, <span class="keyword">int</span> type, <span class="keyword">int</span> protocol)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">ssize_t</span> sendto(<span class="keyword">int</span> sockfd, <span class="keyword">const</span> <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> len, <span class="keyword">int</span> flags, <span class="keyword">const</span> struct sockaddr *dest_addr, <span class="keyword">socklen_t</span> addrlen);</span><br><span class="line"></span><br><span class="line"><span class="keyword">ssize_t</span> recvfrom(<span class="keyword">int</span> sockfd, <span class="keyword">void</span> *buf, <span class="keyword">size_t</span> len, <span class="keyword">int</span> flags, struct sockaddr *src_addr, <span class="keyword">socklen_t</span> *addrlen);</span><br><span class="line"></span><br><span class="line"><span class="comment">//关闭套接字</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">close</span><span class="params">(<span class="keyword">int</span> fd)</span></span>;</span><br></pre></td></tr></table></figure><h5 id="sockaddr结构："><a href="#sockaddr结构：" class="headerlink" title="sockaddr结构："></a>sockaddr结构：</h5><blockquote><p>socket API是一 层抽象的网络编程接口 ,适用于各种底层网络协议,如IPv4、IPv6.然而, 各种网络协议的地址格式各不相同。</p></blockquote><p><img src="http://p9ff104hp.bkt.clouddn.com/%E4%B8%89%E7%A7%8D%E7%B1%BB%E5%9E%8B.jpg" alt="图片加载失败"></p><ul><li><p>注意：socket API可以都用 struct sockaddr *类型表 , 在使用的时候需要强制转化成sockaddr_in; 这样的好处是程序的通用性, 可以接收IPv4, IPv6, 以及UNIX Domain Socket各种类型的sockaddr结构体指针做为参数。</p><hr></li></ul><h4 id="UDP协议"><a href="#UDP协议" class="headerlink" title="UDP协议"></a>UDP协议</h4><blockquote><p>通过上面的学习对UDP有个直观的认识，再详细讨论以下几点：</p></blockquote><ul><li>无连接</li></ul><blockquote><p>知道目的端的IP和端口号就能传输，不需要建立连接。</p></blockquote><ul><li>不可靠传输</li></ul><blockquote><p>没有确认机制，没有重传机制，如果因为网络故障无法发送到对方，UDP协议层也不会给应用层返回任何错误信息。</p></blockquote><ul><li>面向数据报</li></ul><blockquote><p>不能够灵活的控制读写数据的次数和数量。</p></blockquote><ul><li>以上几点在代码中还能得到学习和理解。</li></ul><h5 id="服务器和客户端是怎么运行起来的？"><a href="#服务器和客户端是怎么运行起来的？" class="headerlink" title="服务器和客户端是怎么运行起来的？"></a>服务器和客户端是怎么运行起来的？</h5><p>先说说什么是回显服务器：</p><p>回显服务器是最简单的服务器，客户端发起请求，服务器收到请求，然后客户端发送什么内容，服务器就给客户端返回什么内容。</p><ul><li><strong>服务器：</strong></li></ul><blockquote><p>1、创建socket</p></blockquote><blockquote><p>2、绑定端口</p></blockquote><blockquote><p>3、循环的读取数据</p></blockquote><blockquote><p>4、针对读取到的数据进行计算和处理</p></blockquote><blockquote><p>5、把处理后的结果发回客户端</p></blockquote><ul><li><strong>客户端：</strong></li></ul><blockquote><p>1、创建socket文件</p></blockquote><blockquote><p>2、给服务器发送请求</p></blockquote><blockquote><p>3、从服务器中读取结果。</p></blockquote><ul><li>有了步骤，实现起来就只需要把步骤翻译成Code了：</li></ul><h5 id="服务器实现"><a href="#服务器实现" class="headerlink" title="服务器实现"></a>服务器实现</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个套接字，并检测是否创建成功</span></span><br><span class="line">    <span class="keyword">int</span> sockSer = socket(AF_INET, SOCK_DGRAM, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(sockSer == <span class="number">-1</span>)</span><br><span class="line">        perror(<span class="string">"socket"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">addrSer</span>;</span>  <span class="comment">//创建一个记录地址信息的结构体</span></span><br><span class="line">    addrSer.sin_family = AF_INET;    <span class="comment">//使用AF_INET协议族</span></span><br><span class="line">    addrSer.sin_port = htons(<span class="number">5050</span>);     <span class="comment">//设置地址结构体中的端口号</span></span><br><span class="line">    addrSer.sin_addr.s_addr = inet_addr(<span class="string">"192.168.3.169"</span>);  <span class="comment">//设置通信ip</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//将套接字地址与所创建的套接字号联系起来，并检测是否绑定成功</span></span><br><span class="line">    <span class="keyword">socklen_t</span> addrlen = <span class="keyword">sizeof</span>(struct sockaddr);</span><br><span class="line">    <span class="keyword">int</span> res = bind(sockSer,(struct sockaddr*)&amp;addrSer, addrlen);</span><br><span class="line">    <span class="keyword">if</span>(res == <span class="number">-1</span>)</span><br><span class="line">        perror(<span class="string">"bind"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> sendbuf[<span class="number">256</span>];    <span class="comment">//申请一个发送数据缓存区</span></span><br><span class="line">    <span class="keyword">char</span> recvbuf[<span class="number">256</span>];    <span class="comment">//申请一个接收数据缓存区</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">sockaddr_in</span> <span class="title">addrCli</span>;</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)  <span class="comment">//服务器一直循环接受客户端的请求</span></span><br><span class="line">    &#123;</span><br><span class="line">        recvfrom(sockSer,recvbuf,<span class="number">256</span>,<span class="number">0</span>,(struct  sockaddr*)&amp;addrCli, &amp;addrlen);     <span class="comment">//从指定地址接收客户端数据</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Cli:&gt;%s\n"</span>,recvbuf);</span><br><span class="line"></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Ser:&gt;"</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,sendbuf);</span><br><span class="line">        sendto(sockSer,sendbuf,<span class="built_in">strlen</span>(sendbuf)+<span class="number">1</span>,<span class="number">0</span>,(struct sockaddr*)&amp;addrCli, addrlen);    <span class="comment">//向客户端发送数据</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="客户端实现"><a href="#客户端实现" class="headerlink" title="客户端实现"></a>客户端实现</h5><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;netinet/in.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;arpa/inet.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;sys/socket.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//创建一个套接字，并检测是否创建成功</span></span><br><span class="line">    <span class="keyword">int</span> sockCli = socket(AF_INET, SOCK_DGRAM, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span>(sockCli == <span class="number">-1</span>)&#123;</span><br><span class="line">        perror(<span class="string">"socket"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    addrSer.sin_family = AF_INET;    <span class="comment">//使用AF_INET协议族</span></span><br><span class="line">    addrSer.sin_port = htons(<span class="number">5050</span>);     <span class="comment">//设置地址结构体中的端口号</span></span><br><span class="line">    addrSer.sin_addr.s_addr = inet_addr(<span class="string">"192.168.3.169"</span>);  <span class="comment">//设置通信ip</span></span><br><span class="line">    <span class="keyword">socklen_t</span> addrlen = <span class="keyword">sizeof</span>(struct sockaddr);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> sendbuf[<span class="number">256</span>];    <span class="comment">//申请一个发送数据缓存区</span></span><br><span class="line">    <span class="keyword">char</span> recvbuf[<span class="number">256</span>];    <span class="comment">//申请一个接收数据缓存区</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="comment">//向客户端发送数据</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Cli:&gt;"</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>,sendbuf);</span><br><span class="line">        sendto(sockCli, sendbuf, <span class="built_in">strlen</span>(sendbuf)+<span class="number">1</span>, <span class="number">0</span>, (struct sockaddr*)&amp;addrSer, addrlen);</span><br><span class="line">        接收来自客户端的数据</span><br><span class="line">        recvfrom(sockCli, recvbuf, BUFFER_SIZE, <span class="number">0</span>, (struct sockaddr*)&amp;addrSer, &amp;addrlen);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"Ser:&gt;%s\n"</span>, recvbuf);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="问题思考"><a href="#问题思考" class="headerlink" title="问题思考"></a>问题思考</h4><p>1、UDP协议的特点以及和TCP协议的区别？</p><p>2、UDP连接建立过程分析、TCP呢？</p><p>3、UDP协议是不可靠的，为什么还要使用？</p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;回显服务器的代码实现过程，文章加入了详细的设计过程以及其他的计算机网络理论知识。&lt;br&gt;操作环境：CentOS 7.0 X64 操作系统、Vim编辑器、Gcc编译器。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="SO Kernal" scheme="http://yoursite.com/categories/SO-Kernal/"/>
    
    
      <category term="计算机网络" scheme="http://yoursite.com/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
      <category term="UDP协议" scheme="http://yoursite.com/tags/UDP%E5%8D%8F%E8%AE%AE/"/>
    
      <category term="回显服务器" scheme="http://yoursite.com/tags/%E5%9B%9E%E6%98%BE%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>Hexo + GitHub + Blog【版本：小猪佩奇】</title>
    <link href="http://yoursite.com/2018/05/20/Hexo+GitHub%20Blog/"/>
    <id>http://yoursite.com/2018/05/20/Hexo+GitHub Blog/</id>
    <published>2018-05-20T08:30:11.534Z</published>
    <updated>2018-06-21T10:17:49.835Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="\assets\css\APlayer.min.css"><script src="\assets\js\APlayer.min.js" class="aplayer-secondary-script-marker"></script><h4 id="写在前面"><a href="#写在前面" class="headerlink" title="写在前面"></a>写在前面</h4><ul><li>利用周末时间搭建了Hexo + github + 个性化域名博客</li><li>通过不断地测试和完善，实现了常用功能以及基本的页面美化</li></ul><hr><a id="more"></a><p><img src="http://p9ff104hp.bkt.clouddn.com/13.jpg" alt="图片加载失败"></p><h4 id="问题概况"><a href="#问题概况" class="headerlink" title="问题概况"></a>问题概况</h4><ul><li><p>在搭建过程中遇到了很多棘手的问题，在中途因为没有测试，还崩溃过，只能归零，从头再来。</p></li><li><p>非常感谢众多大神的博客，给了我很多帮助，推荐几个程序员技术交流网站/社区：知乎、简书、CSDN、掘金、牛客、GitHub。</p></li><li><p>因为有了第一次的经验和教训，所以第二次从环境搭建到站点/主题配置就一气呵成了。</p></li><li><p>我的博客后期用来管理优质文章、自己写的小项目、分享我喜欢的图片、音乐歌单、笔记等等，欢迎读者收藏。</p></li></ul><h4 id="工具推荐"><a href="#工具推荐" class="headerlink" title="工具推荐"></a>工具推荐</h4><p>1、<code>Atom</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/atom.png" alt="图片加载失败"></p><p>2、<code>Sublime Text 3</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/Sublime%20Text.png" alt="图片加载失败"></p><p>3、<code>NotePad ++</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/Notepad%20++.png" alt="图片加载失败"></p><p>4、<code>冰点文库下载器</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/%E5%86%B0%E7%82%B9%E6%96%87%E5%BA%93.png" alt="图片加载失败"></p><p>5、<code>LastActivity View</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/LastActivit.png" alt="图片加载失败"></p><p>6、<code>Xshell</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/xshell.png" alt="图片加载失败"></p><p>7、<code>Xftp 6</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/xftp.png" alt="图片加载失败"></p><p>8、<code>Mind Master</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/mindMaster.png" alt="图片加载失败"></p><p>9、<code>Fiddler</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/fiddler.png" alt="图片加载失败"></p><p>10、<code>VC++ 6.0 MSDN</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/MSDN.png" alt="图片加载失败"></p><p>11、<code>Typora</code></p><p><img src="http://p9ff104hp.bkt.clouddn.com/Typora.png" alt="图片加载失败"></p>]]></content>
    
    <summary type="html">
    
      &lt;h4 id=&quot;写在前面&quot;&gt;&lt;a href=&quot;#写在前面&quot; class=&quot;headerlink&quot; title=&quot;写在前面&quot;&gt;&lt;/a&gt;写在前面&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;利用周末时间搭建了Hexo + github + 个性化域名博客&lt;/li&gt;
&lt;li&gt;通过不断地测试和完善，实现了常用功能以及基本的页面美化&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
    
    </summary>
    
      <category term="工具操作" scheme="http://yoursite.com/categories/%E5%B7%A5%E5%85%B7%E6%93%8D%E4%BD%9C/"/>
    
    
      <category term="Hexo" scheme="http://yoursite.com/tags/Hexo/"/>
    
      <category term="Git" scheme="http://yoursite.com/tags/Git/"/>
    
      <category term="Githubpage" scheme="http://yoursite.com/tags/Githubpage/"/>
    
      <category term="随想" scheme="http://yoursite.com/tags/%E9%9A%8F%E6%83%B3/"/>
    
      <category term="程序员常用工具" scheme="http://yoursite.com/tags/%E7%A8%8B%E5%BA%8F%E5%91%98%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
</feed>
